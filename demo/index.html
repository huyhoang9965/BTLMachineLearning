<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Demo ML ‚Äì D·ª± ƒëo√°n ƒëi·ªÉm thi</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        * { box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body {
            margin: 0;
            background: linear-gradient(120deg, #74ebd5, #9face6);
            min-height: 100vh;
        }
        .container { max-width: 1100px; margin: auto; padding: 40px 20px; }
        .header { display: flex; align-items: center; gap: 20px; margin-bottom: 30px; }
        .header img { width: 80px; }
        .card {
            background: #ffffff;
            border-radius: 18px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.12);
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
        }
        label { font-weight: 500; }
        input, select {
            width: 100%;
            padding: 10px 14px;
            border-radius: 10px;
            border: 1px solid #ccc;
            margin-top: 6px;
        }
        button {
            margin-top: 30px;
            width: 100%;
            padding: 15px;
            border-radius: 16px;
            border: none;
            background: linear-gradient(135deg, #6c5ce7, #00cec9);
            color: white;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
        }
        .result-box {
            margin-top: 40px;
            padding: 30px;
            border-radius: 20px;
            background: linear-gradient(135deg, #00cec9, #6c5ce7);
            color: white;
            text-align: center;
        }
        .score { font-size: 60px; font-weight: 700; }

        .error-box {
            margin-top: 25px;
            padding: 16px;
            border-radius: 12px;
            background: #ffe6e6;
            color: #b00020;
            font-weight: 500;
            line-height: 1.6;
        }
    </style>
</head>

<body>
<div class="container">

    <div class="header">
        <img src="https://cdn-icons-png.flaticon.com/512/4712/4712109.png">
        <div>
            <h1>Demo Machine Learning</h1>
            <p>D·ª± ƒëo√°n ƒëi·ªÉm thi sinh vi√™n</p>
        </div>
    </div>

    <div class="card">
        <form method="POST">
            {% set f = form_data %}
            <div class="grid">

                <!-- MODEL -->
                <div>
                    <label>ü§ñ Ch·ªçn m√¥ h√¨nh</label>
                    <select name="model" required>
                        <option value="">-- Ch·ªçn --</option>
                        {% for m in ["Random Forest","XGBoost","Linear Regression","Gradient Boosting"] %}
                        <option value="{{m}}" {% if f.get('model')==m %}selected{% endif %}>{{m}}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- NUMERIC -->
                <div>
                    <label>Gi·ªù h·ªçc m·ªói ng√†y (0‚Äì10)</label>
                    <input type="number" min="0" max="10" step="0.1"
                           name="Gi·ªù h·ªçc m·ªói ng√†y" required
                           value="{{ f.get('Gi·ªù h·ªçc m·ªói ng√†y','') }}">
                </div>

                <div>
                    <label>Gi·ªù s·ª≠ d·ª•ng m·∫°ng x√£ h·ªôi (0‚Äì8)</label>
                    <input type="number" min="0" max="8" step="0.1"
                           name="Gi·ªù s·ª≠ d·ª•ng m·∫°ng x√£ h·ªôi" required
                           value="{{ f.get('Gi·ªù s·ª≠ d·ª•ng m·∫°ng x√£ h·ªôi','') }}">
                </div>

                <div>
                    <label>T·ª∑ l·ªá ƒëi·ªÉm danh (%) (60‚Äì100)</label>
                    <input type="number" min="60" max="100"
                           name="T·ª∑ l·ªá ƒëi·ªÉm danh (%)" required
                           value="{{ f.get('T·ª∑ l·ªá ƒëi·ªÉm danh (%)','') }}">
                </div>

                <div>
                    <label>Gi·ªù ng·ªß (4‚Äì10)</label>
                    <input type="number" min="4" max="10" step="0.1"
                           name="Gi·ªù ng·ªß" required
                           value="{{ f.get('Gi·ªù ng·ªß','') }}">
                </div>

                <div>
                    <label>Th·ªùi gian d√πng m√†n h√¨nh (0‚Äì12)</label>
                    <input type="number" min="0" max="12" step="0.1"
                           name="Th·ªùi gian d√πng m√†n h√¨nh" required
                           value="{{ f.get('Th·ªùi gian d√πng m√†n h√¨nh','') }}">
                </div>

                <div>
                    <label>GPA h·ªçc k·ª≥ tr∆∞·ªõc (0‚Äì4)</label>
                    <input type="number" min="0" max="4" step="0.01"
                           name="GPA h·ªçc k·ª≥ tr∆∞·ªõc" required
                           value="{{ f.get('GPA h·ªçc k·ª≥ tr∆∞·ªõc','') }}">
                </div>

                <!-- BINARY -->
                {% for name in ["L√†m th√™m","Nguy c∆° b·ªè h·ªçc","Ti·∫øp c·∫≠n l·ªõp ph·ª• ƒë·∫°o / gia s∆∞"] %}
                <div>
                    <label>{{ name }}</label>
                    <select name="{{ name }}" required>
                        <option value="">-- Ch·ªçn --</option>
                        <option value="0" {% if f.get(name)=='0' %}selected{% endif %}>Kh√¥ng</option>
                        <option value="1" {% if f.get(name)=='1' %}selected{% endif %}>C√≥</option>
                    </select>
                </div>
                {% endfor %}

                <!-- ORDINAL 0‚Äì7 -->
                <div>
                    <label>T·∫ßn su·∫•t t·∫≠p th·ªÉ d·ª•c (0‚Äì7)</label>
                    <select name="T·∫ßn su·∫•t t·∫≠p th·ªÉ d·ª•c" required>
                        <option value="">-- Ch·ªçn --</option>
                        {% for i in range(0,8) %}
                        <option value="{{ i }}" {% if f.get('T·∫ßn su·∫•t t·∫≠p th·ªÉ d·ª•c')==i|string %}selected{% endif %}>{{ i }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- ORDINAL 1‚Äì5 -->
                {% for name in ["Ch·∫•t l∆∞·ª£ng ch·∫ø ƒë·ªô ƒÉn","M√¥i tr∆∞·ªùng h·ªçc t·∫≠p"] %}
                <div>
                    <label>{{ name }} (1‚Äì5)</label>
                    <select name="{{ name }}" required>
                        <option value="">-- Ch·ªçn --</option>
                        {% for i in range(1,6) %}
                        <option value="{{ i }}" {% if f.get(name)==i|string %}selected{% endif %}>{{ i }}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endfor %}

                <!-- ORDINAL 1‚Äì10 -->
                {% for name in [
                "ƒê√°nh gi√° s·ª©c kh·ªèe tinh th·∫ßn",
                "M·ª©c ƒë·ªô cƒÉng th·∫≥ng",
                "M·ª©c ƒë·ªô h·ªó tr·ª£ c·ªßa cha m·∫π",
                "M·ª©c ƒë·ªô ƒë·ªông l·ª±c",
                "M·ª©c ƒë·ªô lo √¢u khi thi",
                "ƒêi·ªÉm qu·∫£n l√Ω th·ªùi gian"
                ] %}
                <div>
                    <label>{{ name }} (1‚Äì10)</label>
                    <select name="{{ name }}" required>
                        <option value="">-- Ch·ªçn --</option>
                        {% for i in range(1,11) %}
                        <option value="{{ i }}" {% if f.get(name)==i|string %}selected{% endif %}>{{ i }}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endfor %}

                <!-- LEARNING STYLE -->
                <div>
                    <label>Phong c√°ch h·ªçc t·∫≠p (1‚Äì4)</label>
                    <select name="Phong c√°ch h·ªçc t·∫≠p" required>
                        <option value="">-- Ch·ªçn --</option>
                        <option value="1" {% if f.get('Phong c√°ch h·ªçc t·∫≠p')=='1' %}selected{% endif %}>1 ‚Äì Visual</option>
                        <option value="2" {% if f.get('Phong c√°ch h·ªçc t·∫≠p')=='2' %}selected{% endif %}>2 ‚Äì Auditory</option>
                        <option value="3" {% if f.get('Phong c√°ch h·ªçc t·∫≠p')=='3' %}selected{% endif %}>3 ‚Äì Reading/Writing</option>
                        <option value="4" {% if f.get('Phong c√°ch h·ªçc t·∫≠p')=='4' %}selected{% endif %}>4 ‚Äì Kinesthetic</option>
                    </select>
                </div>

            </div>

            <button type="submit">üîÆ D·ª± ƒëo√°n</button>
        </form>

        {% if error %}
        <div class="error-box">
            ‚ö†Ô∏è <b>D·ªØ li·ªáu ƒë·∫ßu v√†o kh√¥ng h·ª£p l·ªá:</b><br>
            {{ error | safe }}
        </div>
        {% endif %}

        {% if prediction is not none %}
        <div class="result-box">
            <h2>K·∫øt qu·∫£ d·ª± ƒëo√°n</h2>
            <div class="score">{{ prediction | round(2) }}</div>
            <p>M√¥ h√¨nh: <b>{{ selected_model }}</b></p>
        </div>
        {% endif %}

    </div>
</div>
</body>
</html>
